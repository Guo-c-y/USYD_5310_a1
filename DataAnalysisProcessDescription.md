# 总体要求

三个数据集分别需要完成以下内容：

### 1. 问题定义（0.5 * 3）
提供一个全面且精准的问题定义。要求：
- 清晰阐述业务/研究需求与研究问题；
- 指明任务类型（分类 / 回归）；
- 识别相关利益相关方；
- 说明研究带来的好处及价值。

具体需要回答：
1. 数据要解决什么问题？  
2. 任务类型：分类还是回归？  
3. 相关利益相关方是谁？为什么能受益？  

### 2. 数据描述（0.5 * 3）
要求对数据集属性进行全面、准确且清晰的描述，并通过表格或可视化呈现。

1. 样本数与特征数；
2. 每个特征的数据类型（数值 numeric / 分类型 categorical / 时间 datetime 等）；
3. 缺失情况：缺失值数量、比例，可视化展示；
4. 分类特征的唯一值数量（cardinality）、分布情况（使用 `value_counts()` + 柱状图）。

### 3. 数据清洗与处理（1.5 * 3）
全面识别并解决主要数据问题，并给出合理的解释。包括缺失值、异常值、冗余特征、错误数据类型、无效条目等。同时进行必要的特征工程。

#### 3.1 缺失值处理
1. **缺失分析**
   - 绘制缺失比例条形图、特征间缺失共现矩阵；
   - 验证缺失机制：
     - **MCAR（完全随机缺失）**：缺失与其他变量无关；
     - **MAR（随机缺失）**：缺失与其他变量相关；
     - **MNAR（非随机缺失）**：缺失与自身潜在值相关。

   方法：  
   - 为每个变量创建缺失指示变量 `m_X`（缺失=1），与其他变量进行逻辑回归、相关性或卡方检验。

2. **缺失处理方法选择**
   - **MCAR，缺失率 < 5%**：
     - 连续型：中位数或分组中位数填充；
     - 分类型：众数或“未知”填充；
     - 可选择直接行删除（若缺失随机且比例极低）。
   - **MAR**：
     - 连续型：KNN Imputer 或 MICE（迭代回归填充）；
     - 分类型：众数填充 + 缺失指示变量。
   - **MNAR**：
     - 必须保留缺失指示变量作为特征；
     - 进行敏感性分析，比较不同填充策略下的结果差异；
     - 若为时间序列：短缺口用前向/后向填充，长缺口可用插值或季节性分解。

3. **缺失处理验证**
   - 连续变量：
     - KS检验、Wasserstein 距离；
     - 填充前后相关矩阵差异（Frobenius 范数）。
   - 分类变量：
     - χ² 检验或 Jensen–Shannon 距离；
   - 下游检验：
     - 在完整案例子集拟合 OLS 回归，比较填充前后回归系数与 95% CI 是否一致。

#### 3.2 异常值处理
1. **判定方法**：
   - 单变量：IQR、Robust z-score；
   - 多变量：马氏距离、稳健协方差；
   - 时间序列：滑动窗口分位数。

2. **处理方法**：
   - 测量错误：替换为缺失并走缺失处理流程；
   - 极端真实值：Winsorize 或 Box-Cox 变换；
   - 若业务明确无效，可删除。

3. **验证**：
   - 分布对比直方图/QQ图；
   - 处理前后中位数、IQR 变化不大；
   - 线性关系（Y ~ X）回归系数稳定。

#### 3.3 冗余与重复
1. **判定**：
   - 重复行：`df.duplicated()`；
   - 近零方差：`df.nunique()/len(df)` < 阈值；
   - 高度相关特征：相关系数 > 0.95 或 VIF > 10。

2. **处理**：
   - 删除重复行；
   - 删除近零方差特征；
   - 对高度相关特征保留业务可解释性强或缺失率低的。

3. **验证**：
   - 删除前后回归模型的 R²/系数差异不大。

#### 3.4 特征工程
1. **新特征设计**：
   - 比值 / 差值特征：如归一化指标；
   - 非线性变换：log、平方根；
   - 时间序列：提取日/周/月、滑动均值、中位数等。

2. **验证方法**：
   - 与目标变量的相关性提升；
   - 再次检查多重共线性；
   - 业务逻辑合理性（数值范围、单位正确）。

### 4. 探索性数据分析 EDA（1.5 * 3）

1. 选择 **两个连续特征** 和 **两个分类特征**。  
2. **连续变量相关性分析**：
   - 使用皮尔逊相关系数、斯皮尔曼秩相关；
   - 可视化散点图、热力图；
   - 用简单线性回归分析两变量关系。  

3. **分类变量与目标相关性分析**：
   - 若目标为连续型：
     - 方差齐性检验：Levene；
     - ANOVA 或 Kruskal–Wallis；
     - 效应量 η² 或 ε²；
     - 可视化：分组箱线图/小提琴图。
   - 若目标为分类：
     - χ² 独立性检验；
     - 效应量：Cramér’s V；
     - 可视化：分组柱状图。

4. **结果解释**：
   - 将 EDA 结果与问题定义结合，分析哪些特征可能是关键驱动因素。

### 5. 代码质量（1 * 3）
1. 可复现性：随机种子固定，代码运行一致；
2. 清晰文档：注释完整，关键步骤有解释；
3. 运行说明：notebook 分章节，流程化执行；
4. 可读性：变量命名清晰，函数模块化。



